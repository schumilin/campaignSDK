!function(a,b,c){var e,f,d={};d.UA=function(){var b=navigator.userAgent.toLowerCase(),c={};return c.inWdj="undefined"!=typeof a.campaignPlugin&&a.campaignPlugin,c.inWechat=!!b.match(/micromessenger/),c.inIos=!!b.match(/(iphone|ipod|ipad)/),c.inAndroid=!!b.match(/(android)/),c.inWp=!!b.match(/(windows phone)/),c.inSymbian=!!b.match(/(symbianos)/),c.inMac=0===navigator.platform.indexOf("Mac"),c.inWindows=0===navigator.platform.indexOf("Win"),c.inIphone=!!b.match(/(iphone)/),c.inIpad=!!b.match(/(ipad)/),c.inMobile=c.inIos||c.inAndroid||c.inWp||c.inSymbian,c.inPC=!(c.inIos||c.inAndroid||c.inWp||c.inSymbian),c.isRetina="undefined"!=typeof a.campaignPlugin&&a.devicePixelRatio>1,c.inWindow=c.inWindows,c}(),d.inPC=d.UA.inPC,d.UA.inWdj&&(e=a.campaignPlugin,d.runSystemShare=function(a,b){a=a||"豌豆荚",b=b||"你的手机娱乐中心",e.share(a,b)},d.runAppShare=function(a,b,c,d,f){a=a||"豌豆荚",b=b||"你的手机娱乐中心",c=c||"http://static.wdjimg.com/www/images/www/p4.png",d=d||"http://www.wandoujia.com/",f=f||"SINA_WEIBO",e.shareTo(a,b,c,d,f)},d.openInBrowser=function(a){e.openInBrowser(a)},d.getUDID=function(){return e.getUDID()},d.getUID=function(){return e.getUID()},d.getAvatar=function(){return e.getAvatar()},d.getUserEmail=function(){return e.getUserEmail()},d.getNickName=function(){return e.getNickName()},d.getUserAuth=function(){return e.getUserAuth()},d.isLogin=function(){return e.isLogin()},d.getPhoneNumber=function(){return e.getPhoneNumber()},d.openUserDetail=function(a){e.openUserDetail(a)},d.isInstalled=function(a){return e.isInstalled(a)},d.isUpgradable=function(a){return e.isUpgradable(a)},d.getAppState=function(a){return e.getAppState(a)},d.getAppVersionCode=function(a){return e.getAppVersionCode(a)},d.getAppVersionName=function(a){return e.getAppVersionName(a)},d.openApp=function(a){e.openApp(a)},d.openAppDetail=function(a){e.openAppDetail(a)},d.openAppDetailWithoutAward=function(a){e.openAppDetailWithoutAward(a)},d.sendIntent=function(a){e.startActivity(a)},d.openVideoDetail=function(a){e.startActivity("wdj://detail/video/"+a+"?video_type=")},d.openEbookDetail=function(a){e.startActivity("wdj://detail/ebbok/"+a)},d.searchWords=function(a){e.startActivity("wdj://search?q="+a)},d.openSubscribeDetail=function(a,b){e.startActivity("wdj://detail/subscribe/publisher/"+b+"/"+a)},d.openSubscribeSubset=function(a){if("undefined"!=typeof e.openSubscribeSubset)e.openSubscribeSubset(a);else{var b="intent://subscribe.wandoujia.com/list/"+a+"#Intent;scheme=http;action=android.intent.action.MAIN;end";e.startActivity(b)}},d.loginAccount=function(){"undefined"!=typeof d.loginAccount?e.loginAccount():e.startActivity("intent:#Intent;component=com.wandoujia.phoenix2/com.wandoujia.p4.account.activity.PhoenixAccountActivity;end")},d.choseLoginAccount=function(){e.startActivity("intent://account.wandoujia.com/android/login#Intent;scheme=https;action=android.intent.action.MAIN;end")},d.installApp=function(a,c){function f(b){if(c&&"function"==typeof c)var f=setInterval(function(){d=e.isInstalled(a.packageName),d&&(clearInterval(f),f=0,c(b))},1500)}var d=!1;typeof e.installByPackage!==b?(e.installByPackage(a.packageName),f({error:0,message:"安装成功"})):a.packageName&&a.downloadUrl&&a.appName&&a.iconUrl?(e.install(a.packageName,a.downloadUrl,a.appName,a.iconUrl,a.size),f({error:0,message:"安装成功"})):c&&"function"==typeof c&&c({error:1,message:"缺少必要参数"})},d.reload=function(){e.reload()},d.setOrientation=function(a){e.setOrientation(a)},d.closeWebView=function(){e.closeWebView()},d.openNewWebView=function(a,b,c,d,f){a=a||"http://www.wandoujia.com",b=b||"豌豆荚",c=c||!0,d=d||!0,f=f||!1,e.openNewWebView(a,b,c,d,f)},d.getVersionCode=function(){return e.getVersionCode()},d.getVersionName=function(){return e.getVersionName()},d.getFullVersionName=function(){return e.getFullVersionName()},d.getIMEI=function(){return e.getIMEI()},d.getBrand=function(){return e.getBrand()},d.getNetworkType=function(){return e.getNetworkType()},d.getLocaleLanguage=function(){return e.getLocaleLanguage()},d.getLocaleCountry=function(){return e.getLocaleCountry()},d.getSDKVersion=function(){return e.getSDKVersionInt()},d.setClipboardText=function(a){return e.setClipboardText(a)},d.toast=function(a){e.toast(a)}),d.constant={telReg:/^0?(13[0-9]|15[0-9]|18[0-9]|14[57]|17[0])[0-9]{8}$/},d.api={needle:"http://www.wandoujia.com/needle/source/",apps:"http://www.wandoujia.com/api/apps/apps",appsOptFields:"?opt_fields=title,icons.*,apks.*.size,apks.*.bytes,apks.*.downloadUrl.*.url,apks.*.creation,installedCountStr,apks.*.versionName,apks.*.versionCode",itemlist:"http://www.wandoujia.com/api/subscribe/itemlist/",subscribe:"http://www.wandoujia.com/api/subscribe/subscriber/subscribe",unsubscribe:"http://www.wandoujia.com/api/subscribe/subscriber/unsubscribe",subscribeStatus:"http://www.wandoujia.com/api/subscribe/publisher/ACCOUNT/"},d.getFeedListData=function(a,b){$.ajax({url:d.api.itemlist+a+"/summary",dataType:"json",success:function(a){b&&"function"==typeof b&&b(a)}})},d.getFeedItemsData=function(a,b){$.ajax({url:d.api.itemlist+a+"/item",dataType:"json",success:function(a){b&&"function"==typeof b&&b(a)}})},d.getSubscribeStatus=function(a,b){$.ajax({url:d.api.subscribeStatus+a,dataType:"json",success:function(a){b&&"function"==typeof b&&b(a)}})},d.subscribe=function(a,b){$.ajax({url:d.api.subscribe,dataType:"json",contentType:"application/json; charset=UTF-8",type:"POST",data:JSON.stringify([{type:"ACCOUNT",id:a}]),success:function(a){b&&"function"==typeof b&&b(a)}})},d.unsubscribe=function(a,b){var c=new XMLHttpRequest;c.open("POST",d.api.unsubscribe,!1),c.send(JSON.stringify([{type:"ACCOUNT",id:a,wdj_auth:$.cookie("wdj_auth")}])),c.getAllResponseHeaders().toLowerCase(),200===c.status&&b&&"function"==typeof b&&b()},d.pushGaEvent=function(a,b,c,d){a=a||"",b=b||"",c=c||"",d=parseInt(d,10)||0,"undefined"!=typeof ga&&ga?ga("send","event",a,b,c,d):"undefined"!=typeof _gaq&&_gaq&&_gaq.push(["_trackEvent",a,b,c,d])},d.setFullScreenHeight=function(b){var c=a.innerHeight;b=b||480,b>c?setTimeout(function(){c=a.innerHeight,b>c&&(c=b),document.body.style.height=c+"px"},1e3):document.body.style.height=c+"px"},d.parseQueryString=function(){var b=a.location.search,c={};return b.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,b,d,e){c[b]=e}),c},d.wechatWebviewShareSetup=function(a,b){$.ajax({url:"http://who.wandoujia.com/wx-corp/js-sdk",type:"POST",data:{url:location.href.split("#")[0]}}).done(function(c){wx.config({debug:!1,appId:c.appId,timestamp:c.timestamp,nonceStr:c.nonceStr,signature:c.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems"]}),wx.ready(function(){wx.onMenuShareTimeline({title:a.title,link:a.link,imgUrl:a.imgUrl,success:function(){a.successCallback&&"function"==typeof a.successCallback&&a.successCallback()},cancel:function(){}}),wx.onMenuShareAppMessage({title:b.title,desc:b.desc,link:b.link,imgUrl:b.imgUrl,type:"",dataUrl:"",success:function(){b.successCallback&&"function"==typeof b.successCallback&&b.successCallback()},cancel:function(){}})})})},d.shareButtonSetup=function(a,b,c){var e="http://service.weibo.com/share/share.php?appkey=1483181040&relateUid=1727978503&url="+encodeURIComponent(a.shortLink||a.link)+"&title="+encodeURIComponent(a.desc)+"&pic="+a.imgUrl;d.UA.inWdj?($(document).on("click",a.element,function(){a.successCallback("P4-weibo-launch"),d.toast("正在打开微博，请稍候..."),d.runAppShare(null,a.desc,a.imgUrl,a.shortLink||a.link,"SINA_WEIBO")}),$(document).on("click",b.element,function(){b.successCallback("P4-wechatFriend-launch"),d.toast("正在打开微信，请稍候..."),d.runAppShare(b.title,b.desc,b.imgUrl,b.link,"WECHAT")}),$(document).on("click",c.element,function(){c.successCallback("P4-wechatTimeline-launch"),d.toast("正在打开微信，请稍候..."),d.runAppShare(c.title,c.title,c.imgUrl,c.link,"WECHAT_TIMELINE")})):($(document).on("click",a.element,function(){a.successCallback("weibo-redirect"),location.href=e}),$(document).on("click",b.element+", "+c.element,function(){d.UA.inWechat?$(this).is(b.element)?(b.successCallback("wechat-wechatFriend-tips"),b.tips()):(c.successCallback("wechat-wechatTimeline-tips"),c.tips()):$(this).is(b.element)?(b.successCallback("other-wechatFriend-qrcode"),b.qrcode()):(c.successCallback("other-wechatTimeline-qrcode"),c.qrcode())}))},f=a.campaignTools,a.campaignTools=d,d.noConflict=function(){return a.campaignTools=f,d},"function"==typeof c&&c.amd&&c("campaignTools",[],function(){return d})}(this);